@{
    Layout = null;
}
@{
    ViewBag.Title = "蜂群无人机集群作战系统";
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>蜂群无人机集群作战系统</title>
    <link rel="stylesheet" type="text/css" href="~/Content/bootstrap-3.3.7-dist/css/style.css" />
    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #000000;
            background-image: url(../../image/bj02.png);
            background-size: cover;
        }

        .roboinfo {
            width: 99%;
            height: 98%;
            margin: 0 auto;
            background-image: url(../../Content/static/img/warcraft.31b0f82f.jpg);
            margin: 0.5% auto;
            background-size: cover;
        }

        .detailinfo {
            height:6vh;
            line-height:6vh;
            text-align: center;
            font-size: 1.5vw;
            white-space:nowrap;
            overflow:hidden;
        }

        .engstate {
        }

        .serial {
            width: 75px;
            border: 1px solid rgba(93,194,254, 1);
            background-color: rgba(0, 40, 40, 0.6);
        }

        #setting {
            border: 1px solid rgba(93,194,254, 1);
            border-radius: 10px;
            background: rgba(0, 231, 231, 0.6);
        }
        /*滚动条开始*/
        .robodetailt {
            width: 100%;
            height: 74%;
            margin: 5px auto;
            overflow-y: scroll
        }
            .robodetailt::-webkit-scrollbar {
                color: #0000FF;
                border: 1px solid #05B7DE;
                background-color: #152043;
            }

            .robodetailt::-webkit-scrollbar-button {
                color: #05B7DE;
                /*border: none;*/
                background: url(../../image/down.png) !important;
                background-size:100%;
            }
                .robodetailt::-webkit-scrollbar-button:vertical:increment {
                    background: url(../../image/up.png) !important;
                    background-size: 100%;
                    background-repeat:no-repeat;
                }

            .robodetailt::-webkit-scrollbar-track {
                width: 10px;
                border: 1px solid #05B7DE;
                border-top: none;
                border-bottom: none;
                background-color: #152043;
            }

            .robodetailt::-webkit-scrollbar-thumb {
                background-color: #09699E;
                border: 1px solid #05B7DE;
            }

            .robodetailt::-webkit-scrollbar-track-piece {
                /* background-color: #13CE66; */
            }
        /*滚动条结束*/
        .TabClss:first-child{
            margin-top:1vh;
        }
        .TabClss div:first-child {
            width: 10%;
            margin-left: 0%;
        }
        .TabClss div {
            width: 14%;
            margin-left: 1%;
            height:6vh;
            font-size:1.5vw;
            line-height:6vh;
        }
        .TabClss .progress_detailt {
            background-color: rgba(0, 40, 40, 0.6);
        }
        .progress_detailt .box_Info {
            width: 14%;
            margin-left: 0;
        }
        .progress_detailt div:nth-child(2) {
            width: 14%;
            text-align: center;
            position: absolute;
            line-height: 6vh;
        }
        .uavInfo {
            width: 94.75%;
            display: flex;
            margin: 1% 3.25% 1% 2%;
        }
            .uavInfo div {
                width: 14%;
                margin-left: 1%
            }
            .uavInfo div:first-child {
                width: 10%;
                margin: 0
            }
            
    </style>
    <link rel="stylesheet" type="text/css" href="~/Content/bootstrap-3.3.7-dist/css/bootstrap.min.css" />
</head>
<body>
    <div id="#app" style="height:100%;overflow:hidden;width:100%">
        <div class="row nav" style="height: 15vh;">
            <div class="col-xs-3" style="height: 15vh;" onclick="skip()">
                <img src="~/image/8998994.png" alt="Alternate Text" />
            </div>
            <div class="col-xs-6" style="height: 15vh;">
                <div class="header_box" style="">
                    <div class="box_title header_left">
                    </div>
                    <div class="header_title" style="">
                        <span class="" style="">&nbsp;蜂群无人机集群作战系统&nbsp;</span>
                    </div>
                    <div class="box_title header_right">
                    </div>
                </div>
            </div>
            <div class="col-xs-3 " style="height: 15vh;">
                <span id="dateTime" class="" style=""></span>
                <a href="" id="logout" class="" style="">退出系统</a>
                <a href="#" id="setting" class="" onclick="tosetting()" style="">
                    <span class="glyphicon glyphicon-cog" style=""></span>
                </a>
            </div>
        </div>
        <div style="width: 100%;height: 1%;background: linear-gradient(to right,#050F2A,#00F5FC,#050F2A);"></div>

        <div style="width: 100%; height: 8vh; margin: 0 auto;display:flex">
            <div class="uavInfo" style="">
                <div class="box_title detailinfo" >
                    <span>序号</span>
                </div>
                <div class="box_title detailinfo">
                    <span>发动机状态</span>
                </div>
                <div class="box_title detailinfo">
                    <span>电量</span>
                </div>
                <div class="box_title detailinfo">
                    <span>结构完好度</span>
                </div>
                <div class="box_title detailinfo">
                    <span>截弹量</span>
                </div>
                <div class="box_title detailinfo">
                    <span>刀浆可用性</span>
                </div>
                <div class="box_title detailinfo">
                    <span>综合评估建设</span>
                </div>
            </div>
            @*<div style="width:1.5em;"></div>*@
        </div>
        <div class="robodetailt" style="">
            <div class="" style="width:96%;margin:0 2%;">

                <div class="testTable" style="width:100%;height:100%;position:relative;">

                </div>

            </div>
        </div>


    </div>


    <script src="~/Content/bootstrap-3.3.7-dist/js/jquery-3.5.1.min.js"></script>
    <script src="~/Content/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
</body>
</html>
<script type="text/javascript">
    window.onload = function () {
        
        render();
        formatDate();
        
        
        
    }
    //获取日期
    function formatDate() {
        let date = new Date();
        let year = date.getFullYear(); // 年
        let month = date.getMonth() + 1; // 月
        let day = date.getDate(); // 日
        var dateTime = document.getElementById('dateTime');
        dateTime.innerHTML = year + "/" + month + "/" + day;
    }
    //判断是否完好 附上背景颜色
    function decideintact() {
        let engstate = document.getElementsByClassName('engstate')
        let assess = document.getElementsByClassName('assess')
        let p_quantity = document.getElementsByClassName('p_quantity')
        let quantity = document.getElementsByClassName('quantity')

        let p_commence = document.getElementsByClassName('p_commence')
        let commence = document.getElementsByClassName('commence')

        let p_cutcap = document.getElementsByClassName('p_cutcap')
        let cutcap = document.getElementsByClassName('cutcap')

        let p_availability = document.getElementsByClassName('p_availability')
        let availability = document.getElementsByClassName('availability')

        for (let i = 0; i < assess.length; i++) {
            //发动机状态
            if (engstate[i].children[0].innerHTML == "正常") {
                engstate[i].className = engstate[i].className + " intact";
            } else if (engstate[i].children[0].innerHTML == "故障") {
                engstate[i].className = engstate[i].className + " unintact";
            } else if (engstate[i].children[0].innerHTML == "不工作") {
                engstate[i].className = engstate[i].className + " offline";
            }
            //综合评估建设
            if (assess[i].children[0].innerHTML == "继续作战") {
                assess[i].className = assess[i].className + " intact";
            } else if (assess[i].children[0].innerHTML == "建议返航") {
                assess[i].className = assess[i].className + " unintact";
            } else if (assess[i].children[0].innerHTML == "待命中...") {
                assess[i].className = assess[i].className + " offline";
            }
            let bg_p_quantity = p_quantity[i].innerHTML.split("%")[0]
            let bg_p_commence = p_commence[i].innerHTML.split("%")[0]
            let bg_p_cutcap = p_cutcap[i].innerHTML.split("%")[0]
            let bg_p_availability = p_availability[i].innerHTML.split("%")[0]
            if (bg_p_quantity >= 0 && bg_p_quantity <= 20) {
                quantity[i].style.backgroundColor = "#AFA477";
            }
            if (bg_p_commence >= 0 && bg_p_commence <= 20) {
                commence[i].style.backgroundColor = "#AFA477";
            }
            if (bg_p_cutcap >= 0 && bg_p_cutcap <= 20) {
                cutcap[i].style.backgroundColor = "#AFA477";
            }
            if (bg_p_availability >= 0 && bg_p_availability <= 20) {
                availability[i].style.backgroundColor = "#AFA477";
            }


        }

    }

    function skip() {
        window.location = "/Home/Index";
    }
    function tosetting() {
        window.location = "/Map/Index";
    }

    //测试页面循环表格用
    function render() {
        var MachineList = "";
        $.ajax({
            url: "/Home/GetMachine",
            dataType: 'json',
            type: "GET",
            async: true,
            success: function (data) {
                MachineList = data.ResultValue
                console.log(MachineList);
                rendering(MachineList);
            }
        });
    }
    function rendering(res){
        var orderBody = '';
        let tab = res;
        console.log(res)
        $.each(tab, function (index, val) {
            orderBody += '<div class="TabClss" style="display:flex;margin:0.5% auto;">\
                <div class="detailinfo serial">\
                    <span>' + val.UavSerialNO + '</span>\
                </div >\
                <div class="engstate detailinfo" style="">\
                    <span class="p_engstate">' + EngineState[val.EngineState].typeName + '</span>\
                </div>\
                <div class="progress_detailt detailinfo" style="">\
                    <div class="skills quantity" style="width:' + val.ElectricQuantity + '%;"></div>\
                    <div class="box_Info">\
                        <span class="p_quantity">' + val.ElectricQuantity + '%</span>\
                    </div>\
                </div>\
                <div class="progress_detailt detailinfo">\
                    <div class="skills commence" style="width:' + val.StructureCommence + '%;"></div>\
                    <div class="box_Info">\
                        <span class="p_commence">' + val.StructureCommence + '%</span>\
                    </div>\
                </div>\
                <div class="progress_detailt detailinfo">\
                    <div class="skills cutcap" style="width:' + val.CuttingCapacity + '%;"></div>\
                    <div class="box_Info" >\
                        <span class="p_cutcap">' + val.CuttingCapacity + '%</span>\
                    </div>\
                </div>\
                <div class="progress_detailt detailinfo">\
                    <div class="skills availability" style="width:' + val.PropellerAvailability + '%;"></div>\
                    <div class="box_Info" style="">\
                        <span class="p_availability">' + val.PropellerAvailability + '%</span>\
                    </div>\
                </div>\
                <div class="assess detailinfo" style="width:14%;">\
                    <span>' + OverallEvaluationBuild[val.OverallEvaluationBuild].typeName + '</span>\
                </div ></div > '
        })
        $('.testTable').append(orderBody);
        decideintact();
    }

    
</script>
<script>
    var EngineState = [
        { typeName: '正常' },
        { typeName: '不工作' },
        { typeName: '故障' }
    ];
    var OverallEvaluationBuild = [
        { typeName: '继续作战' },
        { typeName: '待命中...' },
        { typeName: '建议返航' }
    ];
    var sidenav = [
        {
            UavSerialNO: 'UAV00002',
            machinetype: 'warcraft01.jpg',
            EngineState: '0',
            ElectricQuantity: '100',
            StructureCommence: '100',
            CuttingCapacity: '100',
            PropellerAvailability: '100',
            OverallEvaluationBuild: '0',
        },
    ]
</script>